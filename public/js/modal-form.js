function setupModalFormUrl(o,r){o.find("form").attr("action",r),o.modal("show")}function setupModalsForms(o,r){o.forEach(function(o){o.on("hidden.bs.modal",function(r){o.find("form").trigger("reset"),o.find("div.form-group").removeClass("has-error").removeClass("has-success"),o.find('div.form-group > label[class="has-error"]').remove(),o.find(".chosen-select").val([]).trigger("chosen:updated")});var s=o.find("form"),e=validateForm(s,r);s.submit(function(o){o.preventDefault(),s.valid()&&$.ajax({url:s.prop("action"),method:s.prop("method"),data:s.serialize()}).done(function(o){o.success?location.reload():alert("Form submission error.")}).fail(function(o){showValidationErrors($.parseJSON(o.responseText),e)})})})}function validateForm(o,r){return o.validate({rules:r,errorClass:"has-error",validClass:"has-success",highlight:function(o,r,s){$(o).closest(".form-group").addClass(r).removeClass(s)},unhighlight:function(o,r,s){$(o).closest(".form-group").removeClass(r).addClass(s)},errorPlacement:function(o,r){o.insertAfter($(r).closest(".form-group").children(":last-child"))}})}function showValidationErrors(o,r){var s={};$.each(o,function(o,r){r.forEach(function(r){s[o]=r})}),r.showErrors(s)}